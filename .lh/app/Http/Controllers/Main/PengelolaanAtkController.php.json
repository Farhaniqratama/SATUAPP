{
    "sourceFile": "app/Http/Controllers/Main/PengelolaanAtkController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1705123036628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1705575223200,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,18 +53,16 @@\n             $request,\n             [\n                 'user_id' => 'required',\n                 'atk_id' => 'required',\n-                'jumlah' => 'required',\n                 'keterangan' => 'required',\n                 'tanggal' => 'required',\n                 'status' => 'required',\n \n             ],\n             [\n                 'user_id.required' => 'user_id produk tidak boleh kosong',\n                 'atk_id.required' => 'atk_id tidak boleh kosong',\n-                'jumlah.required' => 'jumlah',\n                 'keterangan.required' => 'keterangan tidak boleh kosong',\n                 'tanggal.required' => 'tanggal tidak boleh kosong',\n                 'status.required' => 'status tidak boleh kosong',\n             ]\n@@ -72,9 +70,8 @@\n \n         PengelolaanAtk::create([\n             'user_id' => $request->user_id,\n             'atk_id' => $request->atk_id,\n-            'jumlah' => $request->jumlah,\n             'keterangan' => $request->keterangan,\n             'tanggal' => $request->tanggal,\n             'status' => $request->status,\n         ]);\n@@ -102,9 +99,8 @@\n             'title' => 'Edit Data Pengajuan Pengelolaan atk',\n             'user' => $user,\n             'id' => $row->id,\n             'atk' => $atk,\n-            'jumlah' => $row->jumlah,\n             'keterangan' => $row->keterangan,\n             'tanggal' => $row->tanggal,\n             'status' => $row->status,\n         ]);\n@@ -118,9 +114,8 @@\n         $row = PengelolaanAtk::find($id);\n         if ($row) {\n             $row->user_id = $request->user_id;\n             $row->atk_id = $request->atk_id;\n-            $row->jumlah = $request->jumlah;\n             $row->keterangan = $request->keterangan;\n             $row->tanggal = $request->tanggal;\n             $row->status = $request->status;\n \n"
                },
                {
                    "date": 1705579688135,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n         );\n \n         PengelolaanAtk::create([\n             'user_id' => $request->user_id,\n-            'atk_id' => $request->atk_id,\n+            'atk_id' => json_encode($request->atk_id),\n             'keterangan' => $request->keterangan,\n             'tanggal' => $request->tanggal,\n             'status' => $request->status,\n         ]);\n"
                },
                {
                    "date": 1705580334106,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n         );\n \n         PengelolaanAtk::create([\n             'user_id' => $request->user_id,\n-            'atk_id' => json_encode($request->atk_id),\n+            'atk_id' => $request->atk_id,\n             'keterangan' => $request->keterangan,\n             'tanggal' => $request->tanggal,\n             'status' => $request->status,\n         ]);\n"
                },
                {
                    "date": 1705580844865,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,17 +67,20 @@\n                 'status.required' => 'status tidak boleh kosong',\n             ]\n         );\n \n-        PengelolaanAtk::create([\n+        $pengelolaan_atk = PengelolaanAtk::create([\n             'user_id' => $request->user_id,\n             'atk_id' => $request->atk_id,\n             'keterangan' => $request->keterangan,\n             'tanggal' => $request->tanggal,\n             'status' => $request->status,\n         ]);\n-\n-        return redirect('main/pengelolaan_atk')->with('success', 'Data berhasil disimpan!');\n+        // Assuming you want to return the created data as JSON\n+        return response()->json([\n+            'message' => 'Data berhasil disimpan!',\n+            'data' => $pengelolaan_atk,\n+        ]);\n     }\n \n     /**\n      * Display the specified resource.\n"
                },
                {
                    "date": 1705581016007,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n         );\n \n         $pengelolaan_atk = PengelolaanAtk::create([\n             'user_id' => $request->user_id,\n-            'atk_id' => $request->atk_id,\n+            'atk_id' => json_encode($request->atk_id),\n             'keterangan' => $request->keterangan,\n             'tanggal' => $request->tanggal,\n             'status' => $request->status,\n         ]);\n"
                },
                {
                    "date": 1705581073871,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,20 +67,17 @@\n                 'status.required' => 'status tidak boleh kosong',\n             ]\n         );\n \n-        $pengelolaan_atk = PengelolaanAtk::create([\n+        PengelolaanAtk::create([\n             'user_id' => $request->user_id,\n-            'atk_id' => json_encode($request->atk_id),\n+            'atk_id' => $request->atk_id,\n             'keterangan' => $request->keterangan,\n             'tanggal' => $request->tanggal,\n             'status' => $request->status,\n         ]);\n-        // Assuming you want to return the created data as JSON\n-        return response()->json([\n-            'message' => 'Data berhasil disimpan!',\n-            'data' => $pengelolaan_atk,\n-        ]);\n+\n+        return redirect('main/pengelolaan_atk')->with('success', 'Data berhasil disimpan!');\n     }\n \n     /**\n      * Display the specified resource.\n"
                },
                {
                    "date": 1705581853186,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,10 +112,8 @@\n     public function update(Request $request, string $id)\n     {\n         $row = PengelolaanAtk::find($id);\n         if ($row) {\n-            $row->user_id = $request->user_id;\n-            $row->atk_id = $request->atk_id;\n             $row->keterangan = $request->keterangan;\n             $row->tanggal = $request->tanggal;\n             $row->status = $request->status;\n \n"
                },
                {
                    "date": 1705732460550,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,8 +96,9 @@\n         $user = User::all();\n         $atk = Atk::all();\n         return view('main.pengelolaan_atk.edit', [\n             'title' => 'Edit Data Pengajuan Pengelolaan atk',\n+            'user_id' => $row->user_id,\n             'user' => $user,\n             'id' => $row->id,\n             'atk' => $atk,\n             'keterangan' => $row->keterangan,\n@@ -112,8 +113,9 @@\n     public function update(Request $request, string $id)\n     {\n         $row = PengelolaanAtk::find($id);\n         if ($row) {\n+            $row->user_id = $request->user_id;\n             $row->keterangan = $request->keterangan;\n             $row->tanggal = $request->tanggal;\n             $row->status = $request->status;\n \n"
                },
                {
                    "date": 1705732741458,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,8 +99,9 @@\n             'title' => 'Edit Data Pengajuan Pengelolaan atk',\n             'user_id' => $row->user_id,\n             'user' => $user,\n             'id' => $row->id,\n+            'atk_id' => $row->atk_id,\n             'atk' => $atk,\n             'keterangan' => $row->keterangan,\n             'tanggal' => $row->tanggal,\n             'status' => $row->status,\n"
                },
                {
                    "date": 1705985553884,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,23 +14,12 @@\n      * Display a listing of the resource.\n      */\n     public function index()\n     {\n-        if ($user = auth()->user()->jab_id == 4) {\n-            $user = auth()->user()->id;\n-            $data['title'] = 'Data pengajuan pengelolaan atk';\n-            $user = PengelolaanAtk::with('users', 'atk')\n-                ->where('user_id', $user)\n-                ->get();\n-            $data['result'] = $user->sortDesc();\n-            return view('main.pengelolaan_atk.index', $data);\n-        } else {\n-            $data['title'] = 'Data pengajuan pengelolaan atk';\n-            $user = PengelolaanAtk::with('users', 'atk')\n-                ->get();\n-            $data['result'] = $user->sortDesc();\n-            return view('main.pengelolaan_atk.index', $data);\n-        }\n+        $data['title'] = 'Data pengajuan pengelolaan atk';\n+        $user = PengelolaanAtk::with('users', 'atk')->get();\n+        $data['result'] = $user->sortDesc();\n+        return view('main.pengelolaan_atk.index', $data);\n     }\n \n     /**\n      * Show the form for creating a new resource.\n"
                }
            ],
            "date": 1705123036628,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers\\Main;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Models\\Atk;\nuse App\\Models\\PengelolaanAtk;\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\n\nclass PengelolaanAtkController extends Controller\n{\n    /**\n     * Display a listing of the resource.\n     */\n    public function index()\n    {\n        if ($user = auth()->user()->jab_id == 4) {\n            $user = auth()->user()->id;\n            $data['title'] = 'Data pengajuan pengelolaan atk';\n            $user = PengelolaanAtk::with('users', 'atk')\n                ->where('user_id', $user)\n                ->get();\n            $data['result'] = $user->sortDesc();\n            return view('main.pengelolaan_atk.index', $data);\n        } else {\n            $data['title'] = 'Data pengajuan pengelolaan atk';\n            $user = PengelolaanAtk::with('users', 'atk')\n                ->get();\n            $data['result'] = $user->sortDesc();\n            return view('main.pengelolaan_atk.index', $data);\n        }\n    }\n\n    /**\n     * Show the form for creating a new resource.\n     */\n    public function create()\n    {\n        $data['user'] = User::all();\n        $data['atk'] = Atk::all();\n        $data['pengelolaan_atk'] = PengelolaanAtk::all();\n        $data['title'] = \"Tambah Data Pengelolaan Atk\";\n        return view(\"main.pengelolaan_atk.create\", $data);\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     */\n    public function store(Request $request)\n    {\n        $validasi = $this->validate(\n            $request,\n            [\n                'user_id' => 'required',\n                'atk_id' => 'required',\n                'jumlah' => 'required',\n                'keterangan' => 'required',\n                'tanggal' => 'required',\n                'status' => 'required',\n\n            ],\n            [\n                'user_id.required' => 'user_id produk tidak boleh kosong',\n                'atk_id.required' => 'atk_id tidak boleh kosong',\n                'jumlah.required' => 'jumlah',\n                'keterangan.required' => 'keterangan tidak boleh kosong',\n                'tanggal.required' => 'tanggal tidak boleh kosong',\n                'status.required' => 'status tidak boleh kosong',\n            ]\n        );\n\n        PengelolaanAtk::create([\n            'user_id' => $request->user_id,\n            'atk_id' => $request->atk_id,\n            'jumlah' => $request->jumlah,\n            'keterangan' => $request->keterangan,\n            'tanggal' => $request->tanggal,\n            'status' => $request->status,\n        ]);\n\n        return redirect('main/pengelolaan_atk')->with('success', 'Data berhasil disimpan!');\n    }\n\n    /**\n     * Display the specified resource.\n     */\n    public function show(string $id)\n    {\n        //\n    }\n\n    /**\n     * Show the form for editing the specified resource.\n     */\n    public function edit(string $id)\n    {\n        $row = PengelolaanAtk::findOrFail($id);\n        $user = User::all();\n        $atk = Atk::all();\n        return view('main.pengelolaan_atk.edit', [\n            'title' => 'Edit Data Pengajuan Pengelolaan atk',\n            'user' => $user,\n            'id' => $row->id,\n            'atk' => $atk,\n            'jumlah' => $row->jumlah,\n            'keterangan' => $row->keterangan,\n            'tanggal' => $row->tanggal,\n            'status' => $row->status,\n        ]);\n    }\n\n    /**\n     * Update the specified resource in storage.\n     */\n    public function update(Request $request, string $id)\n    {\n        $row = PengelolaanAtk::find($id);\n        if ($row) {\n            $row->user_id = $request->user_id;\n            $row->atk_id = $request->atk_id;\n            $row->jumlah = $request->jumlah;\n            $row->keterangan = $request->keterangan;\n            $row->tanggal = $request->tanggal;\n            $row->status = $request->status;\n\n            $row->save();\n\n            return redirect('main/pengelolaan_atk')->with('success', 'Data berhasil diubah');\n        }\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     */\n    public function destroy(string $id)\n    {\n        $data = PengelolaanAtk::findOrFail($id);\n\n        $data->delete();\n        return back()->with('hapus', 'Data sudah di Hapus!');\n    }\n}\n"
        }
    ]
}