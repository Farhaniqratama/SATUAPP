{
    "sourceFile": "app/Http/Controllers/Main/KelolaKebersihanController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1705158833949,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1705191910276,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,9 @@\n                 'status' => 'required',\n \n             ],\n             [\n-                'user_id.required' => 'user_id produk tidak boleh kosong',\n+                'user_id.required' => 'user_id tidak boleh kosong',\n                 'petugas_id.required' => 'ruang_id tidak boleh kosong',\n                 'keluhan.required' => 'keluhan tidak boleh kosong',\n                 'saran.required' => 'saran tidak boleh kosong',\n                 'tanggal.required' => 'tanggal tidak boleh kosong',\n@@ -102,9 +102,9 @@\n         return view('main.kelola_kebersihan.edit', [\n             'title' => 'Edit Data Pengajuan Ruang',\n             'user' => $user,\n             'id' => $row->id,\n-            'petugas' => $petugas_kebersihan,\n+            'petugas_kebersihan' => $petugas_kebersihan,\n             'keluhan' => $row->keluhan,\n             'saran' => $row->saran,\n             'tanggal' => $row->tanggal,\n             'status' => $row->status,\n"
                },
                {
                    "date": 1705192013999,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,18 +53,18 @@\n         $validasi = $this->validate(\n             $request,\n             [\n                 'user_id' => 'required',\n-                'petugas_id' => 'required',\n+                'petugas_kebersihan' => 'required',\n                 'keluhan' => 'required',\n                 'saran' => 'required',\n                 'tanggal' => 'required',\n                 'status' => 'required',\n \n             ],\n             [\n                 'user_id.required' => 'user_id tidak boleh kosong',\n-                'petugas_id.required' => 'ruang_id tidak boleh kosong',\n+                'petugas_kebersihan.required' => 'petugas_kebersihan tidak boleh kosong',\n                 'keluhan.required' => 'keluhan tidak boleh kosong',\n                 'saran.required' => 'saran tidak boleh kosong',\n                 'tanggal.required' => 'tanggal tidak boleh kosong',\n                 'status.required' => 'status tidak boleh kosong',\n@@ -72,9 +72,9 @@\n         );\n \n         KelolaKebersihan::create([\n             'user_id' => $request->user_id,\n-            'petugas_id' => $request->ruang_id,\n+            'petugas_kebersihan' => $request->petugas_kebersihan,\n             'keluhan' => $request->keluhan,\n             'saran' => $request->saran,\n             'tanggal' => $request->tanggal,\n             'status' => $request->status,\n@@ -118,9 +118,9 @@\n     {\n         $row = KelolaKebersihan::find($id);\n         if ($row) {\n             $row->user_id = $request->user_id;\n-            $row->petugas_id = $request->petugas_id;\n+            $row->petugas_kebersihan = $request->petugas_kebersihan;\n             $row->keluhan = $request->keluhan;\n             $row->saran = $request->saran;\n             $row->tanggal = $request->tanggal;\n             $row->status = $request->status;\n"
                },
                {
                    "date": 1705194190803,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,16 +18,16 @@\n     {\n         if ($user = auth()->user()->jab_id == 4) {\n             $user = auth()->user()->id;\n             $data['title'] = 'Data Kelola Kebersihan';\n-            $user = KelolaKebersihan::with('users', 'petugas_kebersihan')\n+            $user = KelolaKebersihan::with('users', 'petugas_kebersihans')\n                 ->where('user_id', $user)\n                 ->get();\n             $data['result'] = $user->sortDesc();\n             return view('main.kelola_kebersihan.index', $data);\n         } else {\n             $data['title'] = 'Data Kelola Kebersihan';\n-            $user = KelolaKebersihan::with('users', 'petugas_kebersihan')\n+            $user = KelolaKebersihan::with('users', 'petugas_kebersihans')\n                 ->get();\n             $data['result'] = $user->sortDesc();\n             return view('main.kelola_kebersihan.index', $data);\n         }\n"
                },
                {
                    "date": 1705194308460,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,16 +18,16 @@\n     {\n         if ($user = auth()->user()->jab_id == 4) {\n             $user = auth()->user()->id;\n             $data['title'] = 'Data Kelola Kebersihan';\n-            $user = KelolaKebersihan::with('users', 'petugas_kebersihans')\n+            $user = KelolaKebersihan::with('users', 'ruang')\n                 ->where('user_id', $user)\n                 ->get();\n             $data['result'] = $user->sortDesc();\n             return view('main.kelola_kebersihan.index', $data);\n         } else {\n             $data['title'] = 'Data Kelola Kebersihan';\n-            $user = KelolaKebersihan::with('users', 'petugas_kebersihans')\n+            $user = KelolaKebersihan::with('users', 'ruang')\n                 ->get();\n             $data['result'] = $user->sortDesc();\n             return view('main.kelola_kebersihan.index', $data);\n         }\n"
                },
                {
                    "date": 1705194941334,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,17 +17,17 @@\n     public function index()\n     {\n         if ($user = auth()->user()->jab_id == 4) {\n             $user = auth()->user()->id;\n-            $data['title'] = 'Data Kelola Kebersihan';\n-            $user = KelolaKebersihan::with('users', 'ruang')\n+            $data['title'] = 'Data pengajuan pengelolaan atk';\n+            $user = KelolaKebersihan::with('users', 'petugas_kebersihan')\n                 ->where('user_id', $user)\n                 ->get();\n             $data['result'] = $user->sortDesc();\n             return view('main.kelola_kebersihan.index', $data);\n         } else {\n-            $data['title'] = 'Data Kelola Kebersihan';\n-            $user = KelolaKebersihan::with('users', 'ruang')\n+            $data['title'] = 'Data pengajuan pengelolaan atk';\n+            $user = KelolaKebersihan::with('users', 'petugas_kebersihan')\n                 ->get();\n             $data['result'] = $user->sortDesc();\n             return view('main.kelola_kebersihan.index', $data);\n         }\n"
                }
            ],
            "date": 1705158833948,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers\\Main;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Models\\PetugasKebersihan;\nuse App\\Models\\KelolaKebersihan;\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\DB as FacadesDB;\n\nclass KelolaKebersihanController extends Controller\n{\n    /**\n     * Display a listing of the resource.\n     */\n    public function index()\n    {\n        if ($user = auth()->user()->jab_id == 4) {\n            $user = auth()->user()->id;\n            $data['title'] = 'Data Kelola Kebersihan';\n            $user = KelolaKebersihan::with('users', 'petugas_kebersihan')\n                ->where('user_id', $user)\n                ->get();\n            $data['result'] = $user->sortDesc();\n            return view('main.kelola_kebersihan.index', $data);\n        } else {\n            $data['title'] = 'Data Kelola Kebersihan';\n            $user = KelolaKebersihan::with('users', 'petugas_kebersihan')\n                ->get();\n            $data['result'] = $user->sortDesc();\n            return view('main.kelola_kebersihan.index', $data);\n        }\n    }\n\n    /**\n     * Show the form for creating a new resource.\n     */\n    public function create()\n    {\n        $data['user'] = User::all();\n        $data['petugas_kebersihan'] = PetugasKebersihan::all();\n        $data['kelola_kebersihan'] = KelolaKebersihan::all();\n        $data['title'] = \"Tambah Data Kelola Kebersihan\";\n        return view(\"main.kelola_kebersihan.create\", $data);\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     */\n    public function store(Request $request)\n    {\n        $validasi = $this->validate(\n            $request,\n            [\n                'user_id' => 'required',\n                'petugas_id' => 'required',\n                'keluhan' => 'required',\n                'saran' => 'required',\n                'tanggal' => 'required',\n                'status' => 'required',\n\n            ],\n            [\n                'user_id.required' => 'user_id produk tidak boleh kosong',\n                'petugas_id.required' => 'ruang_id tidak boleh kosong',\n                'keluhan.required' => 'keluhan tidak boleh kosong',\n                'saran.required' => 'saran tidak boleh kosong',\n                'tanggal.required' => 'tanggal tidak boleh kosong',\n                'status.required' => 'status tidak boleh kosong',\n            ]\n        );\n\n        KelolaKebersihan::create([\n            'user_id' => $request->user_id,\n            'petugas_id' => $request->ruang_id,\n            'keluhan' => $request->keluhan,\n            'saran' => $request->saran,\n            'tanggal' => $request->tanggal,\n            'status' => $request->status,\n        ]);\n\n        return redirect('main/kelola_kebersihan')->with('success', 'Data berhasil disimpan!');\n    }\n\n    /**\n     * Display the specified resource.\n     */\n    public function show(string $id)\n    {\n        //\n    }\n\n    /**\n     * Show the form for editing the specified resource.\n     */\n    public function edit(string $id)\n    {\n        $row = KelolaKebersihan::findOrFail($id);\n        $user = User::all();\n        $petugas_kebersihan = PetugasKebersihan::all();\n        return view('main.kelola_kebersihan.edit', [\n            'title' => 'Edit Data Pengajuan Ruang',\n            'user' => $user,\n            'id' => $row->id,\n            'petugas' => $petugas_kebersihan,\n            'keluhan' => $row->keluhan,\n            'saran' => $row->saran,\n            'tanggal' => $row->tanggal,\n            'status' => $row->status,\n        ]);\n    }\n\n    /**\n     * Update the specified resource in storage.\n     */\n    public function update(Request $request, string $id)\n    {\n        $row = KelolaKebersihan::find($id);\n        if ($row) {\n            $row->user_id = $request->user_id;\n            $row->petugas_id = $request->petugas_id;\n            $row->keluhan = $request->keluhan;\n            $row->saran = $request->saran;\n            $row->tanggal = $request->tanggal;\n            $row->status = $request->status;\n\n            $row->save();\n\n            return redirect('main/kelola_kebersihan')->with('success', 'Data berhasil diubah');\n        }\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     */\n    public function destroy(string $id)\n    {\n        $data = KelolaKebersihan::findOrFail($id);\n\n        $data->delete();\n        return back()->with('hapus', 'Data sudah di Hapus!');\n    }\n}\n"
        }
    ]
}