{
    "sourceFile": "app/Http/Controllers/Main/PersediaanLogistikController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1704856981862,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1705616641347,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,25 +44,25 @@\n             $request,\n             [\n                 'user_id' => 'required',\n                 'logistik_id' => 'required',\n-                'jumlah_logistik' => 'required',\n+                'jumlah' => 'required',\n                 'tanggal_pengambilan' => 'required',\n                 'status' => 'required',\n             ],\n             [\n                 'user_id.required' => 'user_id produk tidak boleh kosong',\n                 'logistik_id.required' => 'logistik_id produk tidak boleh kosong',\n-                'jumlah_logistik.required' => 'jumlah_logistik produk tidak boleh kosong',\n+                'jumlah.required' => 'jumlah tidak boleh kosong',\n                 'tanggal_pengambilan.required' => 'tanggal_pengambilan produk tidak boleh kosong',\n                 'status.required' => 'status produk tidak boleh kosong',\n             ]\n         );\n \n         PersediaanLogistik::create([\n             'user_id' => $request->user_id,\n             'logistik_id' => $request->logistik_id,\n-            'jumlah_logistik' => $request->jumlah_logistik,\n+            'jumlah' => $request->jumlah,\n             'tanggal_pengambilan' => $request->tanggal_pengambilan,\n             'status' => $request->status,\n         ]);\n \n@@ -91,9 +91,9 @@\n             'user' => $user,\n             'id' => $row->id,\n             'user_id' => $row->user_id,\n             'logistik' => $logistik,\n-            'jumlah_logistik' => $row->jumlah_logistik,\n+            'jumlah' => $row->jumlah,\n             'tanggal_pengambilan' => $row->tanggal_pengambilan,\n             'status' => $row->status,\n         ]);\n     }\n@@ -105,9 +105,9 @@\n     {\n         $row = PersediaanLogistik::find($id);\n         $row->user_id = $request->user_id;\n         $row->logistik_id = $request->logistik_id;\n-        $row->jumlah_logistik = $request->jumlah_logistik;\n+        $row->jumlah = $request->jumlah;\n         $row->tanggal_pengambilan = $request->tanggal_pengambilan;\n         $row->status = $request->status;\n         $row->save();\n \n"
                },
                {
                    "date": 1705617986816,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,11 +87,12 @@\n         $user = User::all();\n         $logistik = Logistik::all();\n         return view('main.persediaan_logistik.edit', [\n             'title' => 'Edit Data Pengajuan Logistik',\n+            'user_id' => $row->user_id,\n             'user' => $user,\n             'id' => $row->id,\n-            'user_id' => $row->user_id,\n+            'logistik_id' => $row->logistik_id,\n             'logistik' => $logistik,\n             'jumlah' => $row->jumlah,\n             'tanggal_pengambilan' => $row->tanggal_pengambilan,\n             'status' => $row->status,\n"
                },
                {
                    "date": 1705619071262,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,15 +14,23 @@\n      * Display a listing of the resource.\n      */\n     public function index()\n     {\n-        $user = auth()->user()->id;\n-        $data['title'] = 'Data Pengajuan Logistik';\n-        $permintaan_logistik = PersediaanLogistik::with('users', 'logistik')\n-            ->where('user_id', '=', $user)\n-            ->get();\n-        $data['result'] = $permintaan_logistik->sortDesc();\n-        return view('main.persediaan_logistik.index', $data);\n+        if ($user = auth()->user()->jab_id == 4) {\n+            $user = auth()->user()->id;\n+            $data['title'] = 'Data Pengajuan Logistik';\n+            $permintaan_logistik = PersediaanLogistik::with('users', 'logistik')\n+                ->where('user_id', '=', $user)\n+                ->get();\n+            $data['result'] = $permintaan_logistik->sortDesc();\n+            return view('main.persediaan_logistik.index', $data);\n+        } else {\n+            $data['title'] = 'Data pengajuan persediaan logistik';\n+            $user = PersediaanLogistik::with('users', 'logistik')\n+                ->get();\n+            $data['result'] = $user->sortDesc();\n+            return view('main.persediaan_logistik.index', $data);\n+        }\n     }\n \n     /**\n      * Show the form for creating a new resource.\n"
                },
                {
                    "date": 1705985940244,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,23 +14,12 @@\n      * Display a listing of the resource.\n      */\n     public function index()\n     {\n-        if ($user = auth()->user()->jab_id == 4) {\n-            $user = auth()->user()->id;\n-            $data['title'] = 'Data Pengajuan Logistik';\n-            $permintaan_logistik = PersediaanLogistik::with('users', 'logistik')\n-                ->where('user_id', '=', $user)\n-                ->get();\n-            $data['result'] = $permintaan_logistik->sortDesc();\n-            return view('main.persediaan_logistik.index', $data);\n-        } else {\n-            $data['title'] = 'Data pengajuan persediaan logistik';\n-            $user = PersediaanLogistik::with('users', 'logistik')\n-                ->get();\n-            $data['result'] = $user->sortDesc();\n-            return view('main.persediaan_logistik.index', $data);\n-        }\n+        $data['title'] = 'Data Pengajuan Logistik';\n+        $user = PersediaanLogistik::with('users', 'logistik')->get();\n+        $data['result'] = $user->sortDesc();\n+        return view('main.persediaan_logistik.index', $data);\n     }\n \n     /**\n      * Show the form for creating a new resource.\n"
                }
            ],
            "date": 1704856981862,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers\\Main;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Models\\Logistik;\nuse App\\Models\\PersediaanLogistik;\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\n\nclass PersediaanLogistikController extends Controller\n{\n    /**\n     * Display a listing of the resource.\n     */\n    public function index()\n    {\n        $user = auth()->user()->id;\n        $data['title'] = 'Data Pengajuan Logistik';\n        $permintaan_logistik = PersediaanLogistik::with('users', 'logistik')\n            ->where('user_id', '=', $user)\n            ->get();\n        $data['result'] = $permintaan_logistik->sortDesc();\n        return view('main.persediaan_logistik.index', $data);\n    }\n\n    /**\n     * Show the form for creating a new resource.\n     */\n    public function create()\n    {\n        $data['logistik'] = Logistik::all();\n        $data['user'] = User::all();\n        $data['title'] = \"Tambah Data Pengajuan Logistik\";\n        return view(\"main.persediaan_logistik.create\", $data);\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     */\n    public function store(Request $request)\n    {\n        $validasi = $this->validate(\n            $request,\n            [\n                'user_id' => 'required',\n                'logistik_id' => 'required',\n                'jumlah_logistik' => 'required',\n                'tanggal_pengambilan' => 'required',\n                'status' => 'required',\n            ],\n            [\n                'user_id.required' => 'user_id produk tidak boleh kosong',\n                'logistik_id.required' => 'logistik_id produk tidak boleh kosong',\n                'jumlah_logistik.required' => 'jumlah_logistik produk tidak boleh kosong',\n                'tanggal_pengambilan.required' => 'tanggal_pengambilan produk tidak boleh kosong',\n                'status.required' => 'status produk tidak boleh kosong',\n            ]\n        );\n\n        PersediaanLogistik::create([\n            'user_id' => $request->user_id,\n            'logistik_id' => $request->logistik_id,\n            'jumlah_logistik' => $request->jumlah_logistik,\n            'tanggal_pengambilan' => $request->tanggal_pengambilan,\n            'status' => $request->status,\n        ]);\n\n        return redirect('main/permintaan_logistik')->with('success', 'Data berhasil disimpan!');\n    }\n\n    /**\n     * Display the specified resource.\n     */\n    public function show(string $id)\n    {\n        //\n    }\n\n    /**\n     * Show the form for editing the specified resource.\n     */\n    public function edit(string $id)\n    {\n\n        $row = PersediaanLogistik::findOrFail($id);\n        $user = User::all();\n        $logistik = Logistik::all();\n        return view('main.persediaan_logistik.edit', [\n            'title' => 'Edit Data Pengajuan Logistik',\n            'user' => $user,\n            'id' => $row->id,\n            'user_id' => $row->user_id,\n            'logistik' => $logistik,\n            'jumlah_logistik' => $row->jumlah_logistik,\n            'tanggal_pengambilan' => $row->tanggal_pengambilan,\n            'status' => $row->status,\n        ]);\n    }\n\n    /**\n     * Update the specified resource in storage.\n     */\n    public function update(Request $request, string $id)\n    {\n        $row = PersediaanLogistik::find($id);\n        $row->user_id = $request->user_id;\n        $row->logistik_id = $request->logistik_id;\n        $row->jumlah_logistik = $request->jumlah_logistik;\n        $row->tanggal_pengambilan = $request->tanggal_pengambilan;\n        $row->status = $request->status;\n        $row->save();\n\n        return redirect('main/permintaan_logistik')->with('success', 'Data berhasil diubah');\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     */\n    public function destroy(string $id)\n    {\n        $data = PersediaanLogistik::findOrFail($id);\n        $data->delete();\n        return back()->with('hapus', 'Data sudah di Hapus!');\n    }\n}\n"
        }
    ]
}